<%- include('../parts/header', {req: req}); %>

<div class="container">
    <div class="row justify-content-center p-5">
        <div class="col-lg-5 col-md-6 col-sm-8 bg-light border border-secondary rounded p-4 ">

            <% if(!formData){ %>
                <form id="signin" name="signin" method="POST" action="/signin">
                    <div class="form-group">
                        <label for="login">Login</label>
                        <input type="login" name="login" class="form-control" id="login"
                               placeholder="login">
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" name="password" class="form-control" id="password"
                               placeholder="Password">
                    </div>
                    <div class="form-check">
                        <input type="checkbox" class="form-check-input" id="exampleCheck1">
                        <label class="form-check-label" for="exampleCheck1">Check me out</label>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>

            <% } else { %>
                <form id="signin" name="signin" method="POST" action="/signin">
                    <% const loginFormData = formData.login;
                    if(loginFormData){ %>

                        <div class="form-group">
                            <label for="login">Login</label>
                            <input type="text" name="login"
                                   class="form-control
                                   <%= loginFormData.errors && 'is-invalid' %>
                                   <%= !loginFormData.errors && 'is-valid' %>"
                                   id="login"
                                   value="<%= loginFormData.value %>"
                                   placeholder="my login">
                            <div class="valid-feedback">Looks good!</div>
                            <div class="invalid-feedback">
                                <% if(loginFormData.errors) {
                                    let a = loginFormData.errors;
                                    for(var i = 0; i < a.length;i++) { %>
                                    <p><%= a[i].msg %></p>
                                    <%}%>
                                <%}%>
                            </div>
                        </div>
                    <% } else { %>
                        <div class="form-group">
                            <label for="login">Login</label>
                            <input type="login" name="login" class="form-control" id="login" placeholder="login">
                        </div>
                    <% } %>

                    <% const passFormData = formData.password;
                        if(passFormData){ %>
                            <div class="form-group">
                                <label for="Password">password</label>
                                <input type="password" name="password"
                                       class="form-control
                                       <%= passFormData.errors && 'is-invalid' %>
                                       <%= !passFormData.errors && 'is-valid' %>"
                                       id="password"
                                       value="<%= passFormData.value %>"
                                       placeholder="*** password ***">
                                <div class="valid-feedback">Looks good!</div>
                                <div class="invalid-feedback">
                                    <% if(passFormData.errors) {
                                        let a = passFormData.errors;
                                        for(var i = 0; i < a.length;i++) { %>
                                            <p><%= a[i].msg %></p>
                                        <% } %>
                                    <%}%>
                                </div>
                        </div>
                        <% } else{ %>
                            <div class="form-group">
                                <label for="password">Password</label>
                                <input type="password" name="password" class="form-control " id="password"
                                       placeholder="*** password ***">
                            </div>
                        <% }
                    %>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            <% } %>

        </div>
    </div>
</div>
<h1><%JSON.stringify(formData)%></h1>
<%- include('../parts/footer'); %>
